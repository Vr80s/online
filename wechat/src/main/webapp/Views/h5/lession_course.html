<%@page pageEncoding="UTF-8"%> 
<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<title>我的课程-熊猫中医</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="/Views/h5/css/mui.min.css">
		<link rel="stylesheet" href="/Views/h5/css/common.css">
		<link rel="stylesheet" type="text/css" href="/Views/h5/font/iconfont.css" />
		<style>
				.mui-control-content {
				background-color: white;
				min-height: 420px;
				
			}
			.mui-control-content .mui-loading {
				margin-top: 50px;				
			}
			.mui-slider .mui-slider-group .mui-slider-item{
				background: #efeff4;
			}
			.mui-slider-progress-bar1{
				height: 10px;
				background:#efeff4;
				/*background: pink;*/
				width: 100%;
			}
			
			.mui-navigate-right{
				font-size: 15px;
				line-height: 33px;
				color: #333;
				background: #fff;
				border-bottom: 1px solid #F2F2F2;
			}
			
			.mui-content>.mui-table-view:first-child{
				margin-top: 0px;
			}
			.mui-table-view-cell.mui-collapse .mui-table-view .mui-table-view-cell{
				padding-left: 0px;
			}
			.mui-table-view-cell.mui-collapse .mui-table-view .mui-table-view-cell:after{
				left: 0px;
			}
			#vodeos{
				background: #efeff4;
			}
			.mui-ios .mui-table-view-cell{
				margin-bottom: 10px;
			}
			.mui-table-view-cell:after{
				height: 0px;
			}
			#playvodeos table tr td{
				font-size: 14px!important;
			}
			.mui-popup-backdrop {
			    position: fixed;
			    z-index: 10000;
			    top: 0;
			    right: 0;
			    bottom: 0;
			    left: 0;
			    -webkit-transition-duration: 400ms;
			    transition-duration: 400ms;
			    opacity: 0;
			    background: rgba(0,0,0,0.1);
			}
			.ccH5playerBox{
				height: 200px;
			}
			#playvodeos video{
				height: 200px;
				display: block;
				margin: auto;
			}
		</style>
	</head>

	<body>
		<div class="mui-content">

			<div id="slider" class="mui-slider" style="background: white;margin-top: 10px;">
				<div id="sliderProgressBar" class="mui-slider-progress-bar mui-col-xs-6"></div>
				<div id="mui-slider-group" class="mui-slider-group">
					<div id="item1mobile" class="mui-slider-item mui-control-content mui-active">
						<div id="scroll1" class="mui-scroll-wrapper">
							<div class="mui-scroll">
								<ul class="mui-table-view mui-table-view-chevron vodeos" id="vodeos">
									
								</ul>
							</div>
						</div>
					</div>
					<!--111-->
				</div>
			</div>

		</div>
		
		<div class="mui-popup-backdrop mui-active" style="display: none;" id="cover_div">
				<div class="mui-pull-loading mui-icon mui-spinner" style="position: fixed;top: 37%;left: 49%;"></div>
		</div>
		
		<script src="/Views/h5/js/mui.min.js"></script>
		<script src="/Views/h5/js/common.js"></script>
		<script>
			mui.init({
				swipeBack: false
			});
		
			(function($) {
				$('.mui-scroll-wrapper').scroll({
					indicators: true //是否显示滚动条
				});
				var html2 = '<ul class="mui-table-view"><li class="mui-table-view-cell">第二个选项卡子项-1</li><li class="mui-table-view-cell">第二个选项卡子项-2</li><li class="mui-table-view-cell">第二个选项卡子项-3</li><li class="mui-table-view-cell">第二个选项卡子项-4</li><li class="mui-table-view-cell">第二个选项卡子项-5</li></ul>';
				var item2 = document.getElementById('item2mobile');
				document.getElementById('slider').addEventListener('slide', function(e) {
					if (e.detail.slideNumber === 1) {
						if (item2.querySelector('.mui-loading')) {
							setTimeout(function() {
								item2.querySelector('.mui-scroll').innerHTML = html2;
							}, 500);
						}
					} 
				});
				
				 var firstvideoid;
				
				 requestService("/bxg/course/video/trailers",{course_id :param_course_id},function(data) {
				 	if(data.success){
				 		
				 		    /* var vodeos = document.getElementById("vodeos"); */
				 			
							var videoresult = data.resultObject;
							var resultObjectlength = videoresult.length;
							
							if(resultObjectlength > 0){
								/* var playvodeos = document.getElementById("playvodeos");
					              playvodeos.innerHTML=""; */    
								for(var i=0;i<resultObjectlength;i++){
								var vresult = videoresult[i].videos;
								var vlength = vresult.length;
								var oul = "";
								firstvideoid = vresult[0].video_id;
								
								var oli = document.createElement("li");
							     oli.className = "mui-table-view-cell mui-collapse";
								for(var j=0;j<vlength;j++){
									oul = oul+'<li class="mui-table-view-cell vid" vid="'+vresult[j].video_id+'"><span style="float:left;line-height:33px;display: inline-block;vertical-align: -webkit-baseline-middle;">'+vresult[j].video_name+'</span>'+
									'<button class="mui-btn-success1" value="'+vresult[j].video_id+'" style="float: right;margin-right:-55px;vertical-align: top;">试听</button></li>';
												
								}
								oli.innerHTML = '<a class="mui-navigate-right" href="#">'+videoresult[i].chapter_name+'</a><ul class="mui-table-view mui-table-view-chevron" style="padding: 0 15px;">'+oul+'</ul>';
									vodeos.appendChild(oli);
							  }
								/* videoplay(firstvideoid);	 */
							}else{
								var oli = document.createElement("li");
							     oli.className = "mui-table-view-cell mui-collapse";
								oli.innerHTML = "暂无试听课程列表";
								vodeos.appendChild(oli);
							}
						
				 	}else{
				 		
				 	}
				 })

				var sliderSegmentedControl = document.getElementById('sliderSegmentedControl');
				$('.mui-input-group').on('change', 'input', function() {
					if(this.checked) {
						sliderSegmentedControl.className = 'mui-slider-indicator mui-segmented-control mui-segmented-control-inverted mui-segmented-control-' + this.value;
						//force repaint
						sliderProgressBar.setAttribute('style', sliderProgressBar.getAttribute('style'));
					}
				});
				$('.vodeos').on('tap', '.vid', function() {
					/* var playvodeos = document.getElementById("playvodeos");
					playvodeos.innerHTML=""; */
				   var vid ;
					vid = this.getAttribute("vid");
					console.log(vid+'---3333');
					document.getElementById("cover_div").style.display = "block";
					videoplay(vid)
				});
				
			
				function videoplay(vid){
					sessionStorage.setItem("video_id",vid);
					window.location.href = "/Views/h5/video.html";
					
					 /* requestService("/bxg/video/getVidoInfo",{video_id :vid},function(data) {
					 	if(data.success){
					 		var vodeoresult = data.resultObject;
					 		var script=document.createElement("script");
							script.src= vodeoresult.playCode;
								document.getElementById("cover_div").style.display = "none";
					 	}
					 }) */
				}
				
				function get_cc_verification_code(vid) {
			      return '123456';
			   };
				
				
			})(mui);
			window.addEventListener('toggle', function(event) {
				if(event.target.id === 'M_Toggle') {
					var isActive = event.detail.isActive;
					var table = document.querySelector('.mui-table-view');
					var card = document.querySelector('.mui-scroll');
					if(isActive) {
						card.appendChild(table);
						card.style.display = '';
					} else {
						var content = document.querySelector('.mui-content');
						content.insertBefore(table, card);
						card.style.display = 'none';
					}
				}
			});
			var height =  document.body.clientHeight;
			var contentheight = height -210;
			document.getElementById("mui-slider-group").setAttribute("style","height:"+contentheight+"px;");
			
		</script>
	</body>

</html>