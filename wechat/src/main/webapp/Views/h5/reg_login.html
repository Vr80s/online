<!DOCTYPE html>
<html class="ui-page-login">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title>注册-熊猫中医</title>
		<link href="css/mui.min.css" rel="stylesheet" />		
		<style>
			.area {
				margin: 20px auto 0px auto;
			}
			.mui-input-group:first-child {
				margin-top: 20px;
			}
			.mui-input-group label {
				width: 15%;
			}
			.mui-input-row label~input,
			.mui-input-row label~select,
			.mui-input-row label~textarea {
				width: 85%;
			}
			.mui-checkbox input[type=checkbox],
			.mui-radio input[type=radio] {
				top: 6px;
			}
			.mui-content-padded {
				margin-top: 100px;
			}
			.mui-content-padded:last-child {
				margin-top: 10px;
			}
			.mui-btn {
				padding: 10px;
			}
			.mui-input-group{
				margin-bottom: 10px;
				height: 45px;				
				font-size: 14px;
			}
			.mui-input-row img{
				width: 12px;
				height: 20px;
			}
			.mui-btn{
				background: #01D37F;
			}
			.mui-content-padded{
				
			}
			.mui-content-padded1 checkbox{							
				background: #01D37F;
			
				
			}
			.mui-content-padded p{				
				display: inline;
				color: #bbbbbb;	
				margin-left: 5px;			
			}
			.mui-content-padded p span{
				color: #000000;
			}
			.mui-btn:hover{
				border: none;
				background:#CDCDCD;
			}
			.mui-content_1{			
				margin-top: 45%;
				text-align: center;
				
			}
			.mui-content_1 a{ 
				color: #c3c3c3;
			}
			.tongyi{
				margin-top: 0%;
			}
			.mui-input-row p{
				text-align: center;				
				position: absolute;
				background: pink;
				top: 10px;
				right: 20px;
				background: #01D37F;
				width: auto;
				height: 30px;
				line-height: 30px;
				width: 25%;
				color: #FFFFFF;
			}
			.mui-input-row p:hover{
				background: #BBBBBB;
			}
			.mui-input-row span{
				display: none;
			}
			.mui-content_1 span{
				color: #01D37F;
			}
			.mui-btn a{
				color: white;
			}
		</style>
	</head>

	<body>				
		<div class="mui-content">			
			<form class="mui-input-group">
				<div class="mui-input-row" style="height:45px;" >
					<label><img src="img/2x.png"/></label>			
					<input id='username' type="text" class="mui-input-clear mui-input" placeholder="请设置用户名">
				</div>
			</form>
			<form class="mui-input-group">
				<div class="mui-input-row" style="height:45px;" >
					<label><img src="img/password2x.png"/></label>
					<input id='userpassword' type="password" class="mui-input-clear mui-input" placeholder="请输入密码">				
				</div>
			</form>	
		
			<form class="mui-input-group">
				<div class="mui-input-row" style="height:45px;">
					<label><img src="img/password2x.png"/></label>
					<input id='repassword' type="password" class="mui-input-clear mui-input" placeholder="请再次输入密码">				
				</div>
			</form>	
			<div class="mui-content-padded">
				<div id="tishi" style="text-align: center;color: red;"></div>
				<button id='reg' class="mui-btn mui-btn-block mui-btn-success" onclick="reg_click()">完成注册</button>
			</div>	
			<div class="mui-content_1">
				<p><a href="login.html">已有帐号,马上<span>登录</span>吧！</a></p>
			</div>
		</div>
		<script src="js/mui.min.js"></script>	
		<script type="text/javascript" src="/Views/h5/js/common.js"></script>
		<script>
			//正确时
			var tishi= document.getElementById("tishi");
			var openid = localStorage.openid;
			function reg_click() {
				var mobile = getUrlParam("mobile");
				var username=document.getElementById("username").value; //手机号
				var userpassword=document.getElementById("userpassword").value; //密码
				var repassword =document.getElementById("repassword").value;	//二次密码			
				if(username == ""){
						tishi.innerHTML = "用户名不能为空";
						 return false; 
				}
				if(!stringnull(openid) ){
						tishi.innerHTML = "opend不能为空";
						 return false; 
				}
				if(userpassword==""){
					tishi.innerHTML = "密码不能为空";
					return false; 
				}				
				if(!(/^[a-zA-Z0-9]{6,18}$/.test(userpassword))){
				      tishi.innerHTML = "请输入6~18位的密码";
				        return false; 
				} 
				if(repassword==""){
					tishi.innerHTML = "再次输入密码不能为空";
					return false; 
				}	
				if(userpassword!=repassword){
					   tishi.innerHTML = "两次密码输入不一致";
					   return false; 
				}
//				location.href = "index.html";
//					var urlparm = {
//					username: number,
//					password: userpassword
//				}; 	
       			console.log(userpassword);
				var urlparm = {
					user :mobile,
					username: username,
					openId :openid,
					password: userpassword
				}; 	
				//console.log(mobile+"--------"+username+"------"+password);
				requestService("/bxg/user/phoneRegist",urlparm,function(data) {
					if(data.success) {
//						alert(1111);
						var configresult = data.resultObject;	
//						mui.toast(configresult);
						//返回的信息 下一个页面
						localStorage.name = configresult.loginName;
						localStorage.useid = configresult.id;
						localStorage.username = configresult.name;
						localStorage.sharecode = localStorage.shareCode;
						localStorage.smallHeadPhoto = localStorage.smallHeadPhoto;
						//localStorage.yanzhengma = configresult.yanzhengma;						
					   location.href = "index.html?pageindex=0";
					}else{
						tishi.innerHTML = configresult.errorMessage;
					}
				});
			}
			
		</script>
	</body>

</html>