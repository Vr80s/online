<!doctype html>

<!--html标签中需要先设定font-size的值，后面改变窗口尺寸大小的时候，JS会动态改变这个值，实现rem相对值的改变。-->
<html lang="en" style="font-size: 84.3125px;">
<!--html标签中需要先设定font-size的值，后面改变窗口尺寸大小的时候，JS会动态改变这个值，实现rem相对值的改变。-->

<head>
<meta charset="utf-8">
<!--<title>资料设置</title>-->

<!--这段meta代码需要加上，移动端自适应缩放用-->
<meta name="viewport"
	content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta name="keywords" content="" />
<meta name="description" content="" />
<script>
        (function(window){var setHtmlSize=function(w){var b=750/100;var c=window.innerWidth;if(w){c=w}var a=c/b;if(a<42){a=42}else if(a>60){a=60}document.querySelector("html").style.fontSize=a+"px";if(navigator.userAgent.indexOf("iPad")!=-1){document.querySelector("html").style.fontSize="60px"}};setHtmlSize();window.onresize=function(){var w=window.innerWidth;setHtmlSize(w)}}(window));
</script>


<!--这段meta代码需要加上，移动端自适应缩放用-->
<!--这段JS就是自动检测窗口尺寸大小的，动态改变html的font-size的大小-->
<!-- 网页自适应JS代码引入 -->
<script src="/xcviews/js/common/js.js"></script>
<link rel="stylesheet" href="/xcviews/css/css.css">
<link rel="stylesheet" href="/xcviews/css/tailor.css">
<link href="/xcviews/css/mui.picker.css" rel="stylesheet" />
<link href="/xcviews/css/mui.poppicker.css" rel="stylesheet" />


<script type="text/javascript"
	src="/xcviews/js/common/jquery-1.8.3.min.js"></script>
<style>
body {
	font-size: 0.3rem;
	/* padding: 0.25rem; */
}
/*content*/
.plugin-list {
	overflow: hidden;
	width: 100%;
	padding-bottom: 0.2rem;
}

.plugin-list>li {
	width: 100%;
	margin-bottom: 0.6rem;
}

.plugin-list>li>h3 {
	font-size: 0.3rem;
	font-weight: 500;
	margin-bottom: 0.1rem;
}

.plugin-list>li>div.text {
	background: #f1f1f1;
	padding: 0.2rem 0 0.2rem 0.3rem;
	line-height: 0.55rem;
	border-radius: 0.05rem;
}

.plugin-list>li>div.text>p {
	padding: 0.1rem 0;
}

.plugin-list>li>div.text>a {
	display: inline-block;
	text-decoration: underline;
}

.plugin-list>li>div.text>input {
	width: 100%;
	font-size: 0.3rem;
	border: none;
	line-height: 0.55rem;
	background: none;
	color: red;
}

.plugin-list>li>p.btn {
	font-size: 0.3rem;
	width: 100%;
	line-height: 0.9rem;
	margin-bottom: 0.3rem;
	text-align: center;
	background: #333;
	color: white;
	border-radius: 0.1rem;
}

pre {
	position: relative;
	font-size: 0.26rem;
	width: 100%;
	padding: 0.2rem;
	margin: 0 0 0.3rem;
	background: #f1f1f1;
	color: #333;
	border-radius: 0.05rem;
}

pre:after {
	font-size: 0.28rem;
	color: #cccccc;
	content: 'JS';
	position: absolute;
	right: 0.1rem;
	top: 0.1rem;
}

.password,.sex,.mailbox{
	display:none;
}

.update_address_return {
    width: 0.5rem;
    height: 0.9rem;
    display: inline-block;
    float: left;
    background: url(../images/return.png) no-repeat;
    background-size: 100% 100%;
    margin-left: 0.4rem;
    margin-top: 0.4rem;
}
.return_delicacy{
	width: 2rem;
    height: 1.5rem;
    position: absolute;
}
.site_bto_right01 span{
	font-size: 0.6rem;
	color: #666;
}
.site_bto_right02 span{
	font-size: 0.6rem;
	color: #666;
}
#pet_sign_right{
    display: inline-block;
    float: right;
    font-size: 0.7rem;
    margin-top: 0rem;
    margin-right: 0.4rem;
}
.mui-poppicker-header .mui-btn{
	font-size: 15px;
    height: 34px;
    padding: 0 10px;
    border: none;
    outline: none;
    color: #00bc12;
    background: none;
}
</style>
<link href="../css/picker.css" rel="stylesheet" />

<!-- 选项卡 -->
<script type="text/javascript">
	$(document).ready(function(){
        
		var jobList =[];
		requestService("/bxg/bs/getUserInfoById",{userId:localStorage.getItem("userId")},
				function(data) {
				if (data.success) {
					commonLocalStorageSetItem(data);
					
				    $("#headImg").attr("src",localStorage.getItem("smallHeadPhoto"));
			        
			        if(stringnull(localStorage.getItem("username"))){
			        	 $("#person_one").text(localStorage.getItem("username"));
			        }
			        if(stringnull(localStorage.getItem("sex"))){
			        	
			        	if(localStorage.getItem("sex") ==1){
			       		 $(".lable_img1").css("display","block");	
			             $(".lable_img2").css("display","none");
			        	 $("#person_two").text("男");
			           	 $("#form input[name='sex']:eq(0)").attr("checked",'checked');
			           }else if(localStorage.getItem("sex") ==0){
			        	   
			        	 $(".lable_img2").css("display","block");	
			          	 $(".lable_img1").css("display","none");
			          	 
			           	 $("#form input[name='sex']:eq(1)").attr("checked",'checked');
			           	 $("#person_two").text("女");
			           }
			        }
			        if(stringnull(localStorage.getItem("provinceName"))){
			        	 $("#szd_cityP").text(localStorage.getItem("provinceName")+"  "+localStorage.getItem("cityName"));
			        }
			        if(stringnull(localStorage.getItem("email"))){
			        	 $("#person_five").text(localStorage.getItem("email"));
			        }
			        if(stringnull(localStorage.getItem("info"))){
			       	      $("#person_sign").text(localStorage.getItem("info"));
			        }
			        
			        //搞下身份信息
			    	requestService("/bxg/oa/jobVo",{group:"occupation"}, function(data) {
						if (data.success) {
							//jobList = data.resultObject;
							
							var occupation  = localStorage.getItem("occupation");
							
							for (var int = 0; int <  data.resultObject.length; int++) {
								var job ={};
								var array_element =  data.resultObject[int];
								job.text = array_element.value;
								job.value=array_element.id;
								if(job.value == occupation){
									$("#sfxx").text(job.text);
								}
								jobList.push(job);
							}
						}
					},false);
			        
			        
			    	if(stringnull(localStorage.getItem("occupationOther"))){
			       	      $("#zyxx").text(localStorage.getItem("occupationOther"));
			        }
			        
			} else {
				alert("网络异常");
			}
		},false);
		
		
		//身份信息
		var userPicker = new mui.PopPicker();

		//userPicker.setData(jobList);
		 userPicker.setData(jobList); 
		var showUserPickerButton = document.getElementById('showUserPicker');
		var userResult = document.getElementById('sfxx');
		showUserPickerButton.addEventListener('tap', function(event) {
			userPicker.show(function(items) {
				//sfxx
				userResult.innerText = items[0].text;
				userResult.className = items[0].value;
				//返回 false 可以阻止选择框的关闭
				//return false;
				checkUser1("occupation");
			});
		}, false);
		
		
		
		
		
		//用户名长度
		function nickName() {
		    var yonghuReg = /([\u4e00-\u9fa5]+)|(\w+)|([-]+)/g;
		    var yonghuNameLength = 0;
		    var yonghuName = $("#nickname").val().trim();
		    var arr = [];
		    yonghuName.replace(yonghuReg, function (a, hanzi, number, zXian) {
		        if (hanzi != undefined) {
		            var hanziL = hanzi.length * 2;
		            arr.push(hanziL);
		        }
		        if (number != undefined) {
		            var numberL = number.length;
		            arr.push(numberL);
		        }
		        if (zXian != undefined) {
		            var zXianL = zXian.length;
		            arr.push(zXianL);
		        }
		    });
		    for (var i = 0; i < arr.length; i++) {
		        yonghuNameLength += arr[i];
		    }
		    return yonghuNameLength;
		}
		
		var  cymYonghuInfo =$("#errorMsg");
		
		
		$(".return").click(function(){
	  		$(".person_body").removeClass('person_body1');
    		$(".attention").show();
    		/*$(".pet_name").hide();*/
    		/*$(".pet_sign").hide();*/
    		/*$(".call").hide();*/
  			$(".call01").hide();
		});
		
		
 		//点击  个性签名
  	    $(".person_sign").click(function(){ 
  	    	$(".person_body").addClass('person_body1');
    		/*$(".pet_sign").show();*/
    		$(".attention").hide();
    		
    		$("#info").focus();
  		})
		//保存个性签名
  		$(".pet_sign_right").click(function(){
  		    //验证名称的合法性
  		    
  			var nikeName = $("#info").val().trim();
  			if(!stringnull(nikeName) || nikeName.length>20 || nikeName.length<4){
  			   cymYonghuInfo.show();
   			   cymYonghuInfo.html("<p>个性签名不能为空</p>"
  			          + "<p>长度只能在4-20个字符之间</p>");
   		       return false;
  			}
  			//隐藏错误，
  			cymYonghuInfo.hide();
  			//保存信息
  			checkUser1("info");
  			
  			$(".person_body").removeClass('person_body1');
    		$(".attention").show();
    		$(".pet_sign").hide();
  		});
		
		
		// 点击昵称开始
  		$(".person_one").click(function(){
	  		$(".person_body").addClass('person_body1');
    		/*$(".pet_name").show();*/
    		$(".attention").hide();
    		$("#nickname").focus();
  		});
 
  		$("#pet_name_right").click(function(){
	  		var nickNameReg = /^[A-Za-z0-9_\-\u4e00-\u9fa5]+$/;//支持中文、字母、数字、'-'、'_'的组合，4-20个字符
	        var numberReg=/^\d{4,20}$/;//纯数字验证
	        var yonghuNameLength;
	        var nikeName = $("#nickname").val().trim();
	        if(nickNameReg.test(nikeName)){
                yonghuNameLength = nickName();
            }else{
                yonghuNameLength=0;
            }
  			if(nikeName == ""){
  			   cymYonghuInfo.show();
  			   cymYonghuInfo.html("<p>支持中文、字母、数字、'-'、'_'的组合，4-20个字符</p><p>格式错误,仅支持汉字、字母、数字、'-''_'的组合</p>"
  			          + "<p>用户名不能是纯数字，请重新输入！</p><p>长度只能在4-20个字符之间</p>");
  			   return false;	  			
  			}else if(!nickNameReg.test(nikeName)){
  			   cymYonghuInfo.show();
  			   cymYonghuInfo.html("<p>支持中文、字母、数字、'-'、'_'的组合，4-20个字符</p><p>格式错误,仅支持汉字、字母、数字、'-''_'的组合</p>"
 			          + "<p>用户名不能是纯数字，请重新输入！</p><p>长度只能在4-20个字符之间</p>");
  		       return false;
  			}else if(numberReg.test(nikeName)){
  				cymYonghuInfo.show();
  				cymYonghuInfo.html("<p>支持中文、字母、数字、'-'、'_'的组合，4-20个字符</p><p>格式错误,仅支持汉字、字母、数字、'-''_'的组合</p>"
  	  			          + "<p>用户名不能是纯数字，请重新输入！</p><p>长度只能在4-20个字符之间</p>");
  		       return false;
  			}else if (yonghuNameLength > 20 || yonghuNameLength < 4){
  				cymYonghuInfo.show();
  				 cymYonghuInfo.html("<p>支持中文、字母、数字、'-'、'_'的组合，4-20个字符</p><p>格式错误,仅支持汉字、字母、数字、'-''_'的组合</p>"
  	  			          + "<p>用户名不能是纯数字，请重新输入！</p><p>长度只能在4-20个字符之间</p>");
                return false;
            }
  			cymYonghuInfo.hide();
  			checkUser1("nickname");
  			
  			//验证名称的合法性
  			$(".person_body").removeClass('person_body1');
    		$(".attention").show();
    		$(".pet_name").hide();
  		});
		// 点击昵称结束
		

		/*
		 * 保存性别
		 */
		$("#sex_save").click(function(){
			$("#errorMsg").hide();
			
			/*$(".sex_pet_name").hide();*/
    		$(".attention").show();
	  		
	  		checkUser1("sex");
  		}); 
  		$(".person_two").click(function(){
	  		/* $(".person_body").addClass('person_body1'); */
    		$(".sex_pet_name").show();
    		$(".attention").hide();
    	  	if(localStorage.getItem("sex") ==1){
          		 $(".lable_img1").css("display","block");	
                 $(".lable_img2").css("display","none");
              	 $("#form input[name='sex']:eq(0)").attr("checked",'checked');
              }else if(localStorage.getItem("sex") ==0){
           	 $(".lable_img2").css("display","block");	
             	 $(".lable_img1").css("display","none");
             	 
             	$("#form input[name='sex']:eq(1)").attr("checked",'checked');
              }
    		$("#nickname1").focus();
  		});
  		$(".sex_div0_li1_label").click(function(){
    		$(".lable_img1").show();
    		$(".lable_img2").hide();
    		 $("#form input[name='sex']:eq(0)").attr("checked",'checked');
  		});
  		$(".sex_div0_li2_label").click(function(){
    		$(".lable_img2").show();
    		$(".lable_img1").hide();
    		$("#form input[name='sex']:eq(1)").attr("checked",'checked');
  		});
  		$(".return").click(function(){
    		$(".sex_pet_name").hide();
  		});
  		
  		$(".sex_div0_li1_label").click();
  		/* $(".return").click(function(){
	  		$(".person_body").removeClass('person_body1');
    		$(".attention").show();
    		$(".pet_name").hide();
  		}); */
  		
  		
  		//$(".sex_label1").click();
		// 点击性别结束
		// 点击更改邮箱开始
  		$(".person_five").click(function(){
	  		$(".person_body").addClass('person_body1');
    		/*$(".mailbox").show();*/
    		$(".attention").hide();
    		
    		$("#email").focus();
  		});
  		$(".return").click(function(){
	  		$(".person_body").removeClass('person_body1');
    		$(".attention").show();
    		/*$(".mailbox").hide();*/
  		});
  		

  		$(".mailbox_right").click(function(){
  			var regEmail = /^\w+([-+.]\w+)*@\w+([-.]\w{2,})*\.\w{2,}([-.]\w{2,})*$/;
  			var email =$("#email").val();
	  		if(email == ""){
	  			cymYonghuInfo.show();
	  			cymYonghuInfo.text("邮箱不能为空");
	  			return false;
	  		}else if (email.indexOf('@') == -1 && !regEmail.test(email)) {
	  			cymYonghuInfo.show();
	  			cymYonghuInfo.text("邮箱格式不正确!");
                return false;
            }
  			checkUser1("email");
  			$(".person_body").removeClass('person_body1');
    		$(".attention").show();
    		/*$(".mailbox").hide();*/
  		});
		// 点击更改邮箱结束
		// 修改密码开始
		$(".person_four").click(function(){
	  		$(".person_body").addClass('person_body');
    		/*$(".password").show();*/
    		$(".attention").hide();
  		});
  		$(".return").click(function(){
	  		$(".person_body").removeClass('person_body1');
    		$(".attention").show();
    		$(".pet_name").hide();
    		/*$(".password").hide();*/
    		
    		/*$(".call").hide();*///手机号隐藏
    		
    		
    		cymYonghuInfo.hide();
  		});
		// 修改密码结束
		
		/* 更换手机号开始 */
		$(".person_six").click(function(){
	  		$(".person_body").removeClass('person_body1');
    		/*$(".call").show();*/
    		$(".attention").hide(); 
    		
    		//获取下当前的手机号吗
    		$(".call_cen").text("当前绑定的手机号："+localStorage.name);
    		//
  		});
  		
	});
</script>
<style>
	.person_img{
		margin-top: 0;
	}
	.sex_pet_name_top{
		padding-bottom:0;
	}
	.pet_name_top{
		padding-bottom:0;
	}
	.attention_left{
		width: 1.6rem;
	    height: 1.8rem;
	    float: left;
	}
	.call_popup_bg{
		width: 100%;
	    height: 100%;
	    background: #000;
	    position: fixed;
	    top: 0;
	    opacity: 0.5;
	}
	.my_right_img{
		margin-top: 0.15rem;
		width: 0.5rem;
	}
	.my_right_img img{
		height: 100%;
	}
	#logoBox{
		width: 2rem;
	    height: 2rem;
	    float: right;
	    margin-right: 0.4rem;
	    margin-top: 0.2rem;
	    padding-top: 0;
	}
	#logoBox img{
		width: 100%;
		height: 100%;
	}
	.person_cen{
		padding: 0;
		border: 0;
	}
	.person{
		position: relative;
	    line-height: 3.75rem;
	    padding: 0;
	    height: 3.75rem;
	    margin: 0;
	}
	.person0{
		width: 97%;
	    line-height: 3.75rem;
	    height: 3.75rem;
	    border-bottom: 1px solid #e5e5e5;
	    float: right;
	}
	#logoBox{
		width: 2.25rem;
	    height: 2.25rem;
	    margin-top: 0.75rem;
	    margin-right: 1rem;
	}
</style>
</head>

<body class="person_body">

	<!-- 点击头像出现框开始 -->
	<div class="camera" style="display: none;">
		<div class="camera_bg"></div>
		<div class="camera_cen">
			<div class="camera_main">
				<div class="camera_img1"><img src="/xcviews/images/camera.png" /></div>
				<div class="camera_img2"><img src="/xcviews/images/shu0.png" /></div>	
				<div class="camera_img3" id="s_dpage"><img src="/xcviews/images/custom.png" /></div>
			</div>
		</div>
	</div>
	<!-- 点击头像出现框结束 -->
	
	
	
	
	<div style="position: relative;">
	
		<!--头部-->
<!-- <div id="user_head">
        <a id="left_ico" href="javascript:history.go(-1);">
          <i class="icon iconfont">&#xe645;</i>
        </a>
        <span>个人头像</span>
        <a id="s_dpage" href="javascript:void(0);">
           <i class="icon iconfont">&#xe633;</i> 
        </a>
</div> -->

<div class="htmleaf-container">
<div id="clipArea"></div>
<div id="view"></div>
</div>


<!-- <div class="btn-1">
<button>确认更换</button>
</div> -->

	</div>
	
	
 	<div id="dpage">
		 <a href="javascript:void(0);">
		     <input type="button" name="file" class="button" value="选择图片">
			  <input id="file" type="file" onchange="javascript:setImagePreview();" accept="image/*" multiple  />
		      </a>
		<!--  <a href="javascript:void(0);"><input type="button" name="file" class="button" value="选取照片">
			  <input id="file" type="file" onchange="javascript:setImagePreview();" accept="image/*" multiple  /></a> -->
		 <a href="javascript:void(0);" class="qx"><button id="clipBtn">截取图片</button></a>
	</div>
	
	
	
		<!-- 资料设置开始 -->
	<div class="attention" style="margin-top:2rem;">
		<div class="attention_top">
			<div class="attention_left" id="grabble_img"><div class="return"></div></div>
			
			<div class="dl" style="padding-top1: 0.2rem;">资料设置</div>
		</div>
		<div class="both"></div>
		<div class="person" style="">
			<div class="person0">
			<p>头像</p>
			<form method="post" enctype="multipart/form-data" id="form1">
				<!-- 头像。别删亲 -->
			   	<!--   <input id="file" type="file" name="file" onchange="checkUser()" style="width:14.5rem;height:2rem;position: absolute;right:0.38rem;top:0.4rem;opacity: 0;" />
			 <div class="person_img" style="margin-top: 0.2rem;">
					<img src="../images/touxiang.png" id="headImg" alt="">
				 </div> -->
				 <!-- 图像区域 -->
			 	<a href="javascript:void(0);" class="logoBox" id="logoBox" style="" onchange="checkUser()">
				    <img  src="" width="100%" id="headImg" />
				</a>
				
				<div class="my_right_img" style="position: absolute;right: -0.25rem;"><img src="/xcviews/images/right_jian.png"></div>
			</form>
			</div>
			<div class="both"></div>
		</div>
		<div class="person_cen">
			<div class="person_cen0">
			<div class="person_cen_top person_one" onclick="location.href ='nickname.html'">
				<p class="person_p1">昵称</p>
				<div class="person_cen_right">
					<p id="person_one"></p>  
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
		    
		    <div class="person_cen_top person_two" onclick="location.href ='change_sex.html'">
				<p class="person_p1">性别</p>
				<div class="person_cen_right">
					<p id="person_two"></p>   
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
			
			<div class="person_cen_top person_five" onclick="location.href ='mailbox.html'">
				<p class="person_p1">邮箱</p>
				<div class="person_cen_right">
					<p id="person_five">立即绑定</p>
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
			
		   <div class="person_cen_top person_three" onclick="szd_picker2()">
				<p class="person_p1">所在地</p>
				<div class="person_cen_right" style="margin-top:0.05rem;">
					<p id="szd_cityP">请选择</p>   
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
			
			<div class="person_cen_top person_sign" onclick="location.href ='signature.html'" style="margin-bottom: 0;border: 0;">
				<p class="person_p1">个性签名</p>
				<div class="person_cen_right">
					<p id="person_sign"></p>  
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
			</div>
			<div class="both"></div>
		</div>
		<div class="both"></div>
		
		
		<div class="person_cen" style="margin-top: 0.4rem;margin-bottom: 0.4rem;">
			<div class="person_cen0">
			<div class="person_cen_top" id="showUserPicker">
				<p class="person_p1">身份信息</p>
				<div class="person_cen_right">
					<p id="sfxx">中医爱好者</p>
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
			<div class="person_cen_top" onclick="location.href ='occupation_info.html'" style="border: 0;">
				<p class="person_p1">职业信息</p>
				<div class="person_cen_right">
					<p id="zyxx">学生</p>
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
			</div>
			<div class="both"></div>
		</div>
		
		<div class="person_cen">
			<div class="person_cen0">
		<!-- 	
		   <div class="person_cen_top person_four" onclick="location.href ='change_password.html'">
				<p class="person_p1">密码</p>
				<div class="person_cen_right">
					<p>修改密码</p>
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
			
			<div class="person_cen_top person_six" onclick="location.href ='phone_number.html'">
				<p class="person_p1">手机号</p>
				<div class="person_cen_right">
					<p id="person_five">更换手机号</p>
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div> 
			
			<div class="person_cen_top person_five" onclick="location.href ='mailbox.html'">
				<p class="person_p1">邮箱</p>
				<div class="person_cen_right">
					<p id="person_five">立即绑定</p>
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
			-->
			
			<div class="person_cen_top person_seven" style="border-bottom:0px;margin-bottom: 0;" onclick="location.href ='address.html'">
				<p class="person_p1">地址管理</p>
				<div class="person_cen_right">
					<!-- <p id="person_five">添加地址</p> -->
					<div class="my_right_img"><img src="/xcviews/images/right_jian.png"></div>
				</div>
				<div class="both"></div>
			</div>
			</div>
			<div class="both"></div>
		</div>
		<!-- <div class="quit" id="quit">退出登录</div> -->
	</div>
	<!-- 资料设置结束 -->
	
	<script type="text/javascript" src="/Views/h5/js/mui.min.js"></script>
	<script type="text/javascript"
		src="/xcviews/js/common/ajaxfileupload.js"></script>
	<script type="text/javascript" src="/Views/h5/js/common.js"></script>
	<script type="text/javascript" src="/xcviews/js/person.js"></script>
	<script type="text/javascript" src="/xcviews/js/address.js"></script>
	
	<!-- 修改密码结束 -->
	<div style="text-align: center;color: red;margin-top: 20px;font-size: 14px;" id="errorMsg"></div>

</body>

<script src="../js/city.js"></script>
<script src="../js/picker.min.js"></script>
<script src="../js/mui.picker.js"></script>
<script src="../js/mui.poppicker.js"></script>

<script>

/* <p id="szd_cityP" onclick="szd_picker2()">请选择</p>    */

    /* 选择省市区插件    -- 初始化所在地这个地方啦 */
    function szd_picker2() {
        var nowValue = document.getElementById('nowValue');
        new Picker({
            "title": '请选择',//标题(可选)
            "defaultValue": "",//默认值-多个以空格分开（可选）
            "type": 2,//需要联动级数[1、2、3]（可选）
            "data": cityData,//数据(必传)
            "keys": {
                "id": "Code",
                "value": "Name",
                "childData": "level"//最多3级联动
            },//数组内的键名称(必传，id、text、data)
            "callBack": function (val) {
                //回调函数（val为选择的值）
				$("#szd_cityP").html(val);
				checkUser1("provinceCityName");
            }
        });
    };

    /* 选择省市区插件    -- 初始化新增地址这个地方啦 */
    function picker2() {
        //var nowValue = document.getElementById('nowValue');
        new Picker({
            "title": '请选择',//标题(可选)
            "defaultValue": "内蒙古自治区 呼和浩特市 赛罕区",//默认值-多个以空格分开（可选）
            "type": 3,//需要联动级数[1、2、3]（可选）
            "data": cityData,//数据(必传)
            "keys": {
                "id": "Code",
                "value": "Name",
                "childData": "level"//最多3级联动
            },//数组内的键名称(必传，id、text、data)
            "callBack": function (val) {
                //回调函数（val为选择的值）
				$("#cityP").html(val);
				//checkUser1();
            }
        });
    };

</script>

<script type="text/javascript">
	$(document).ready(function(){
		$('#btn').click(function(){
			$('#yanzhengma').focus();
		});
	});
</script>


<script src="/xcviews/js/jquery.min.js" type="text/javascript"></script>
<script>window.jQuery || document.write('<script src="/xcviews/js/jquery-2.1.1.min.js"><\/script>')</script>
<script src="/xcviews/js/iscroll-zoom.js"></script>
<script src="/xcviews/js/hammer.js"></script>
<script src="/xcviews/js/jquery.photoClip.js"></script>
<script>
var obUrl = ''
//document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
$("#clipArea").photoClip({
	width: 280,
	height: 280,
	file: "#file",
	view: "#view",
	ok: "#clipBtn",
	loadStart: function() {
		console.log("照片读取中");
	},
	loadComplete: function() {
		console.log("照片读取完成");
	},
	clipFinish: function(dataURL) { //
		var file  = $("#file");
		//console.log(dataURL);
		var imageName = file[0].value;//文件名
		var index = imageName .lastIndexOf("\\");  
		imageName  = imageName.substring(index + 1, imageName.length);
		
		var params ={
			base64Data:dataURL,
			imageName:imageName
		}
		ajaxUploadBase64File(params);
	}
});
function ajaxUploadBase64File(params){
    //var url = window.location.protocol + '//' + window.location.host + "/register/uploadBase64";
    
    requestService("/bxg/user/userCenterFormSub2",params, function(data) {
    	 if(data.success == true){
         	var result = data.resultObject;
 			if(stringnull(result.smallHeadPhoto)){
 				/*alert("result.smallHeadPhoto"+result.smallHeadPhoto);*/
 				$("#headImg").attr("src",result.smallHeadPhoto);
 				//同时我们也要变化token中的头像值。
 				localStorage.setItem("smallHeadPhoto",result.smallHeadPhoto);
 			}
         }else{
             console.log("上传失败");
         }
  	})
}; 
</script>
<script>
$(function(){
$("#logoBox,#s_dpage").click(function(){
$(".htmleaf-container").fadeIn(300);
$("#dpage").addClass("show");
})
	$("#clipBtn").click(function(){
		$("#logoBox").empty();
		$('#logoBox').append('<img src="' + imgsource + '" align="absmiddle" style=" width:100%;">');
		$(".htmleaf-container").hide();
		$("#dpage").removeClass("show");
	})
});
</script>
<script type="text/javascript">
$(function(){
	jQuery.divselect = function(divselectid,inputselectid) {
		var inputselect = $(inputselectid);
		$(divselectid+" small").click(function(){
			$("#divselect ul").toggle();
			$(".mask").show();
		});
		$(divselectid+" ul li a").click(function(){
			var txt = $(this).text();
			$(divselectid+" small").html(txt);
			var value = $(this).attr("selectid");
			inputselect.val(value);
			$(divselectid+" ul").hide();
			$(".mask").hide();
			$("#divselect small").css("color","#333")
		});
	};
	$.divselect("#divselect","#inputselect");
});
</script>
<script type="text/javascript">
$(function(){
	jQuery.divselectx = function(divselectxid,inputselectxid) {
		var inputselectx = $(inputselectxid);
		$(divselectxid+" small").click(function(){
			$("#divselectx ul").toggle();
			$(".mask").show();
		});
		$(divselectxid+" ul li a").click(function(){
			var txt = $(this).text();
			$(divselectxid+" small").html(txt);
			var value = $(this).attr("selectidx");
			inputselectx.val(value);
			$(divselectxid+" ul").hide();
			$(".mask").hide();
			$("#divselectx small").css("color","#333")
		});
	};
	$.divselectx("#divselectx","#inputselectx");
});
</script>
<script type="text/javascript">
$(function(){
	jQuery.divselecty = function(divselectyid,inputselectyid) {
		var inputselecty = $(inputselectyid);
		$(divselectyid+" small").click(function(){
			$("#divselecty ul").toggle();
			$(".mask").show();
		});
		$(divselectyid+" ul li a").click(function(){
			var txt = $(this).text();
			$(divselectyid+" small").html(txt);
			var value = $(this).attr("selectyid");
			inputselecty.val(value);
			$(divselectyid+" ul").hide();
			$(".mask").hide();
			$("#divselecty small").css("color","#333")
		});
	};
	$.divselecty("#divselecty","#inputselecty");
});
</script>
<script type="text/javascript">
$(function(){
   $(".mask").click(function(){
	   $(".mask").hide();
	   $(".all").hide();
   })
	$(".right input").blur(function () {
		if ($.trim($(this).val()) == '') {
			$(this).addClass("place").html();
		}
		else {
			$(this).removeClass("place");
		}
	})
});
</script>
<script>
$("#file0").change(function(){
	var objUrl = getObjectURL(this.files[0]) ;
	 obUrl = objUrl;
	console.log("objUrl = "+objUrl) ;
	if (objUrl) {
		$("#img0").attr("src", objUrl).show();
	}
	else{
		$("#img0").hide();
	}
}) ;
function qd(){
   var objUrl = getObjectURL(this.files[0]) ;
   obUrl = objUrl;
   console.log("objUrl = "+objUrl) ;
   if (objUrl) {
	   $("#img0").attr("src", objUrl).show();
   }
   else{
	   $("#img0").hide();
   }
}
function getObjectURL(file) {
	var url = null ;
	if (window.createObjectURL!=undefined) { // basic
		url = window.createObjectURL(file) ;
	} else if (window.URL!=undefined) { // mozilla(firefox)
		url = window.URL.createObjectURL(file) ;
	} else if (window.webkitURL!=undefined) { // webkit or chrome
		url = window.webkitURL.createObjectURL(file) ;
	}
	return url ;
}
</script>
<script type="text/javascript">
var subUrl = "";
$(function (){
	$(".file-3").bind('change',function(){
		subUrl = $(this).val()
		$(".yulan").show();
		$(".file-3").val("");
	});

	$(".file-3").each(function(){
		if($(this).val()==""){
			$(this).parents(".uploader").find(".filename").val("营业执照");
		}
	});
$(".btn-3").click(function(){
$("#img-1").attr("src", obUrl);
$(".yulan").hide();
$(".file-3").parents(".uploader").find(".filename").val(subUrl);
})
	$(".btn-2").click(function(){
		$(".yulan").hide();
	})

});
</script>
<script type="text/javascript">
function setImagePreview() {
	var preview, img_txt, localImag, file_head = document.getElementById("file_head"),
			picture = file_head.value;
	if (!picture.match(/.jpg|.gif|.png|.bmp/i)) return alert("您上传的图片格式不正确，请重新选择！"),
			!1;
	if (preview = document.getElementById("preview"), file_head.files && file_head.files[0]) preview.style.display = "block",
			preview.style.width = "100px",
			preview.style.height = "100px",
			preview.src = window.navigator.userAgent.indexOf("Chrome") >= 1 || window.navigator.userAgent.indexOf("Safari") >= 1 ? window.webkitURL.createObjectURL(file_head.files[0]) : window.URL.createObjectURL(file_head.files[0]);
	else {
		file_head.select(),
				file_head.blur(),
				img_txt = document.selection.createRange().text,
				localImag = document.getElementById("localImag"),
				localImag.style.width = "100px",
				localImag.style.height = "100px";
		try {
			localImag.style.filter = "progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)",
					localImag.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = img_txt
		} catch(f) {
			return alert("您上传的图片格式不正确，请重新选择！"),
					!1
		}
		preview.style.display = "none",
				document.selection.empty()
	}
	return document.getElementById("DivUp").style.display = "block",
			!0
}
</script>
</html>
