<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--<title>去支付</title>-->
	<title>熊猫中医</title>
	<style>
		*{
			margin:0;
			padding:0;
			
		}
		img{
			border:0;
		}
		#test{
			width:100%;
			height:100%;
		    position: relative;
		}
		.test_top{
			width: 100%;
			height: 0.6rem;
			background: #1b1a20;
		}
		.test_bg{
			width: 8rem;
		    height: 8rem;
		    position: absolute;
		    top: -0.05rem;
		    right: 0;	
		}
		.test_bg img{
			width: 6.5rem;
			float: right;
			margin-right: 0.54rem;
		}
	</style>
</head>
<body style="background:#515151;">
<div id="test">

	<!-- test_top这个代码头部的背景色 -->
	<div class="test_top"></div>
	<div class="test_bg"><img src="/xcviews/images/go_pay.png" /></div>
</div>
</body>
    <script type="text/javascript" src="../js/js.js"></script>

<!-- input背景切换 -->
<script type="text/javascript" src="../js/common/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="../../Views/h5/js/mui.min.js"></script>
<script type="text/javascript" src="/xcview/js/XCh5Pay.js"></script>
<script type="text/javascript" src="/Views/h5/js/common.js"></script>
<script>
    function getQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]); return null;
    }
    function is_weixn(){
        var ua = navigator.userAgent.toLowerCase();
        if(ua.match(/MicroMessenger/i)=="micromessenger") {
            return true;
        } else {
            return false;
        }
    }
 // type =1 购买  type =2 充值
        var type = getQueryString("type");
    
  	 	if(is_weixn()){   //在微信浏览器内部时 ，进行轮询 
       		//轮循查看订单是否已支付 跳转 redirectUrl
       		if(type==1){
       			setInterval("whileSelectOrderStatus()","2000");
       		}
  		}else {           //不在微信内时
	    	if(type==1){//支付
	    		jmpPayPage("/xczh/alipay/pay",2,"formIsWechat=1&orderId="+getQueryString("orderId"),null);
	    	}else{		//充值 --》怎样证明充值成功呢
	    		jmpPayPage("/xczh/alipay/rechargePay",2,"formIsWechat=1&type="+getQueryString("type")+"&userId="+getQueryString('userId')+"&actualPay="+getQueryString('actualPay'),null);
	    	}
 		 }

function whileSelectOrderStatus(){
	requestService("/xczh/order/getByOrderId",{orderId:getQueryString("orderId")}, function(data) {
		 if (data.success) {
             var result = data.resultObject;
             if(result.orderStatus==1){ //
                 location.href=""+getQueryString("redirectUrl")+"";
             }
         }
	},false)
}
    var ua = navigator.userAgent.toLowerCase();
    if (/iphone|ipad|ipod/.test(ua)) {
    } else if (/android/.test(ua)) {
        $(".test_top").css("background","#393A3E");
    }
</script>
</html>